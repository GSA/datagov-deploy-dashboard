--- # Dashboard prerequisites

- name: Copying Dashboard configuration for Nginx
  template:
    src: "dashboard.nginx.conf"
    dest: "/etc/nginx/sites-enabled/dashboard.nginx.conf"
  notify:
      - reload nginx

#- name: Temporarily making /var/www/ writeable by all
#  file:
#    path: "/var/www"
#    state: directory
#    mode: 0777
#    owner: "www-data"
#    group: "www-data"
#    recurse: yes
#  ignore_errors: yes

- name: Copying SAML crt
  template:
    src: dashboard-saml-sp-cert.crt
    dest: "{{ saml_sp_cert_path }}"
    mode: 0644

- name: Copying SAML pem
  template:
    src: dashboard-saml-sp-private.pem
    dest: "{{ saml_sp_private_key_path }}"
    mode: 0644

- name: Installing required packages
  package: name={{ item }} state=installed
  with_items:
    - mariadb-client-5.5
    - php-mcrypt